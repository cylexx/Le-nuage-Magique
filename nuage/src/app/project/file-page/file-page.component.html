<div class="container-fluid">
  <div class="row align-middle">
    <div class="col-md-1">
      <button id="buttonReturn" class="btn center disabled" (click)="goBack()">
        <img id="imgReturn" src="assets/return.png">
      </button>
    </div>

    <div class="col-md-1 center">
      <img src="assets/ic_folder_black_24dp_1x.png">
      {{rootFolder.name}}
    </div>

    <div id="divCheckBox" class="col-md-3 center">
      <div class="material-switch">
        Google Drive
        <input id="switchGD" type="checkbox" [(ngModel)]="googleFilter"/>
        <label for="switchGD" class="label-default"></label>
      </div>

      <div class="material-switch">
        Dropbox
        <input id="swtichDB" type="checkbox" [(ngModel)]="dropboxFilter"/>
        <label for="swtichDB" class="label-default"></label>
      </div>
    </div>

    <div class="col-md-3 center">
    </div>

    <div id="divSettings" class="col-md-4 center icon-menu">
      <img src="assets/ic_mode_edit_black_24dp_2x.png" (click)="renamemodal.open()"/> <!-- The modal is downside -->
      <img id="moveFile" src="assets/ic_compare_arrows_black_36dp_2x.png" (click)="movemodal.open()">
      <img id="addFile" src="assets/ic_insert_drive_file_black_24dp_2x.png" (click)="showPopUp('File')">
      <img id="addFolder" src="assets/ic_add_folder_black_24dp_2x.png" (click)="showPopUp('Folder')">
      <img id="delete" src="assets/ic_delete_black_24dp_2x.png" (click)="deleteSelectedFile()">
      <img id="settings" src="assets/ic_settings_black_24dp_2x.png" (click)="returnToSettings()">
    </div>
  </div>
</div>

<div class="row align-middle">
  <div class="col-md-4"></div>
  <app-storage >Loading...</app-storage>
  
</div>

<table id="fileTable">
  <tr id="headerTable">
    <!-- <th>ID</th> -->
    <th width="1">SOURCE</th>
    <th width="1">TYPE</th>
    <th>NOM</th>
    <th>SIZE</th>
  </tr>
  <tbody class="lign" *ngFor="let file of rootFolder.childrens" (click)="selectFile(file)" (dblclick) = "goInSelectedFolder(file)" id="{{file.sources[0].id}}">
    <tr *ngIf="filterFile(file)">
      <td align="center" >
        <img *ngFor="let src of file.sources" height=25px width=25px src="assets/{{src.name | lowercase}}.png" >
      </td>
      <td align="center"><img src="{{file.getIconURL()}}"></td>
      <td>{{ file.name }}</td>
      <td>{{ formatBytes(file.size) }}</td>
    </tr>
  </tbody>
</table>


<!-- RENAME MODAL -->

<modal #renamemodal>
    <modal-header [show-close]="true">
        <h4 class="modal-title">Rename file</h4>
    </modal-header>
    <modal-body>
      <div class="form-group">
        <label for="recipient-name" class="form-control-label">File name:</label>
        <input type="text" class="form-control" id="new-file-name">
      </div>
    </modal-body>
    <modal-footer >
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      <button type="button" class="btn btn-primary" (click)="renameFile()">Rename</button>
    </modal-footer>
</modal>


<!-- FOLDER POPUP -->

<div id="lightFolder" class="white_content">
  <p>Entrez le nom du nouveau dossier :</p>
  <textarea id="textAreaNewFolder"></textarea>
  <form>
    <input id="googleDriveFolder" type="checkbox"> Google Drive
    <input id="dropboxFolder" type="checkbox"> Dropbox
  </form>
  <button id="cancelAddingFolder" (click)="disablePopUp('Folder')">Annuler</button>
  <button id="validateAddingFolder" (click)="addingNewFolder()">Valider</button>
</div>

<!-- File POPUP -->

<div id="lightFile" class="white_content">
  <p>Sélectionner le fichier à upload.</p>
  <form>
    <input id="googleDriveFile" type="checkbox"> Google Drive
    <input id="dropboxFile" type="checkbox"> Dropbox
  </form>
  <button id="cancelAddingFile" (click)="disablePopUp('File')">Annuler</button>
  <input type="file" (change)="fileChange($event)" placeholder="Upload file">
</div>
<div id="fade" class="black_overlay"></div>

<!-- move File POPUP -->

<div id="lightMoveFile" class="white_content">
  <p>Chemin du fichier à déplacer.</p>
  <textarea id="textAreaFileToMove"></textarea>
  <p>Chemin de destination.</p>
  <textarea id="textAreaDestinationFile"></textarea>
  <form>
    <input id="googleDriveMoveFile" type="checkbox"> Google Drive
    <input id="dropboxMoveFile" type="checkbox"> Dropbox
  </form>
  <button id="cancelAddingFile" (click)="disablePopUp('moveFile')">Annuler</button>
  <button (click)="moveFile()">Valider</button>
</div>
<div id="fade" class="black_overlay"></div>

<!-- MOVE FILE MODAL -->

<modal #movemodal>
    <modal-header [show-close]="true">
        <h4 class="modal-title">Move file</h4>
    </modal-header>
    <modal-body>
      <div class="form-group">
        <label for="recipient-name" class="form-control-label">New path</label>
        <input type="text" class="form-control" id="new-path">
      </div>
      <form>
        <input id="googleDriveMoveFile" type="checkbox"> Google Drive
        <input id="dropboxMoveFile" type="checkbox"> Dropbox
      </form>
    </modal-body>
    <modal-footer>
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      <button type="button" class="btn btn-primary" (click)="moveFile()">Move</button>
    </modal-footer>
</modal>
